#!/bin/sh
usage () {
cat <<EOF
usage: configure [-h | --debug] [-g | --debug]
EOF
}
debug=no
die () {
  echo "configure: error: $*" 1>&2
  exit 1
}
while [ $# -gt 0 ]
do
  case "$1" in
    -h | --help) usage; exit 0;;
    -g | --debug) debug=yes;;
    *) die "invalid option '$1' (try '-h')";;
  shift
done
COMPILE="gcc -Wall"
if [ $debug = yes ]
then
  COMPILE="$COMPILE -g3"
else
  COMPILE="$COMPILE -O3 -DNDEBUG"
fi
echo "$COMPILE"
sed -e "s,@COMPILE@,$COMPILE," makefile.in > makefile
